{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst API_KEY = '42334631-07f239856d3b6a49db441bfb9';\nconst PER_PAGE = 15;\n\nexport async function fetchImages(query, page) {\n    const loader = document.querySelector('.loader');\n    loader.style.display = 'block';\n\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${PER_PAGE}`);\n        loader.style.display = 'none';\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        loader.style.display = 'none';\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to fetch images. Please try again later.',\n        });\n        return null; // Возвращаем null вместо выбрасывания ошибки\n    }\n}\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery a');\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search-input');\nconst loadMoreBtn = document.getElementById('load-more');\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    const query = input.value.trim();\n    if (!query) {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search query',\n        });\n        return;\n    }\n    currentQuery = query;\n    currentPage = 1; // Сбрасываем страницу на 1 для нового поиска\n    fetchAndRenderImages();\n});\n\nloadMoreBtn.addEventListener('click', () => {\n    currentPage++;\n    fetchAndRenderImages();\n});\n\nasync function fetchAndRenderImages() {\n    const loader = document.querySelector('.loader');\n    loader.style.display = 'block';\n    try {\n        // Используем новую функцию fetchImages с параметрами query и page\n        const response = await fetchImages(currentQuery, currentPage);\n        console.log(response.data);\n        loader.style.display = 'none';\n        if (response.data && response.data.hits && response.data.hits.length > 0) {\n            appendGalleryMarkup(response.data.hits);\n            lightbox.refresh();\n        } else {\n            // Если hits отсутствует или его длина равна нулю, выведите сообщение об отсутствии результатов\n            iziToast.info({\n                title: 'Info',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        }\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        loader.style.display = 'none';\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to fetch images. Please try again later.',\n        });\n    }\n}\n\nasync function appendGalleryMarkup(images) {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML += createGalleryMarkup(images);\n    // Скрываем или показываем кнопку \"Load more\" в зависимости от количества изображений\n    if (images.length < 15) {\n        loadMoreBtn.classList.add('is-hidden');\n    } else {\n        loadMoreBtn.classList.remove('is-hidden');\n    }\n}"],"names":["API_KEY","PER_PAGE","fetchImages","query","page","loader","response","axios","error","iziToast","lightbox","SimpleLightbox","form","input","loadMoreBtn","currentPage","currentQuery","event","fetchAndRenderImages","appendGalleryMarkup","images","gallery"],"mappings":"owBAIA,MAAMA,EAAU,qCACVC,EAAW,GAEV,eAAeC,EAAYC,EAAOC,EAAM,CAC3C,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMC,EAAW,MAAMC,EAAM,IAAI,gCAAgCP,CAAO,MAAM,mBAAmBG,CAAK,CAAC,iEAAiEC,CAAI,aAAaH,CAAQ,EAAE,EACnM,OAAAI,EAAO,MAAM,QAAU,OAChBC,EAAS,IACnB,OAAQE,EAAO,CACZ,eAAQ,MAAM,yBAA0BA,CAAK,EAC7CH,EAAO,MAAM,QAAU,OACvBI,EAAS,MAAM,CACX,MAAO,QACP,QAAS,iDACrB,CAAS,EACM,IACV,CACL,CClBO,MAAMC,EAAW,IAAIC,EAAe,YAAY,EAEjDC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAc,SAAS,eAAe,WAAW,EACvD,IAAIC,EAAc,EACdC,EAAe,GAEnBJ,EAAK,iBAAiB,SAAU,MAAOK,GAAU,CAC7CA,EAAM,eAAc,EACpB,MAAMd,EAAQU,EAAM,MAAM,KAAI,EAC9B,GAAI,CAACV,EAAO,CACRM,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,6BACrB,CAAS,EACD,MACH,CACDO,EAAeb,EACfY,EAAc,EACdG,GACJ,CAAC,EAEDJ,EAAY,iBAAiB,QAAS,IAAM,CACxCC,IACAG,GACJ,CAAC,EAED,eAAeA,GAAuB,CAClC,MAAMb,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,QACvB,GAAI,CAEA,MAAMC,EAAW,MAAMJ,EAAYc,EAAcD,CAAW,EAC5D,QAAQ,IAAIT,EAAS,IAAI,EACzBD,EAAO,MAAM,QAAU,OACnBC,EAAS,MAAQA,EAAS,KAAK,MAAQA,EAAS,KAAK,KAAK,OAAS,GACnEa,EAAoBb,EAAS,KAAK,IAAI,EACtCI,EAAS,QAAO,GAGhBD,EAAS,KAAK,CACV,MAAO,OACP,QAAS,0EACzB,CAAa,CAER,OAAQD,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CH,EAAO,MAAM,QAAU,OACvBI,EAAS,MAAM,CACX,MAAO,QACP,QAAS,iDACrB,CAAS,CACJ,CACL,CAEA,eAAeU,EAAoBC,EAAQ,CACvC,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,WAAa,oBAAoBD,CAAM,EAE3CA,EAAO,OAAS,GAChBN,EAAY,UAAU,IAAI,WAAW,EAErCA,EAAY,UAAU,OAAO,WAAW,CAEhD"}